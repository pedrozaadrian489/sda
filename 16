function outElement(){var c=document.getElementById("publicityContent");var d=document.getElementById("defenseConsumerContent");var b=document.getElementById("publicityContent");if(c){var f=vm.$refs.dropinfo.zoneShowed+"SubLink";var e=vm.$refs.dropinfo.zoneShowed+"Icon";var a=!c.contains(event.target)&&(event.target.id!=f&&event.target.id!=e&&event.target.id!="zone8Button");if(a){$("#publicity").hide();if(typeof vm!="undefined"){vm.showMainCompatibility=true;if(typeof vm.$refs.dropinfo!="undefined"){vm.$refs.dropinfo.showModal=false;vm.$refs.dropinfo.showPublicityModal=false;vm.$refs.dropinfo.zoneShowed=""}}}else{}}}Vue.component("dropdown-info",{name:"dropdown-info",template:'<div class="text-center"><div id="divSubLink"><div v-show="!showModal && (position[zone.zoneName] <= position[zoneShowed]) || zoneShowed == \'\'" v-for="zone in zones" ><b-button  v-show="!showModal" :id="zone.zoneName + \'SubLink\'" class="sublink-button" variant="sublink" @click.prevent="loadPublicityContent(zone.zoneName)" v-b-modal.modalZone8Info v-html="getZoneHtml(zone)"></b-button></div><div id="defenseConsumerContent" v-show="showDefenseModal && !showModal" :class="{marginPublicity: showDefenseModal}" ><div v-html="defenseContent"></div></div><div id="publicityContent" v-show="showPublicityModal && !showModal" :class="{marginPublicity: showPublicityModal}" ><div v-html="publicityContentHtml"></div></div><div class="my-5" style="color: #626A71;" v-show="!showPublicityModal && !showModal && !showDefenseModal && bankId != \'BBTA\'">{{textCondition1}} <div v-b-modal.modalConditionSecurity style="color: #626A71;" @click="addContent()"> <a href="javascript:void(0);" class="link-condition">{{textCondition2}} </a>{{textCondition3}}<b-modal id="modalConditionSecurity" centered hide-footer ref="conditionModal"></b-modal></div></div></div></div>',created:function(){this.$parent.startSpinner();var c="security_conditions.html";var d="CCE514";e();function e(){var g="/icbs-web/Ajax?AID=CAMPAIGN_TEMPLATE&RQE=FAC0019C79B63589&CRFT=fac0019c79b6348e";$.ajax({url:g,type:"GET",cache:true,async:true,data:{TemplateName:c,CampaignCode:d}}).done(function(h){vm.$refs.dropinfo.template=h}).fail(function(h){})}var f=this;var a=JSON.parse(sessionStorage.getItem("publicities"));if(a==null){this.getAllPublicity()}this.$parent.startSpinner();var b=setInterval(function(){a=JSON.parse(sessionStorage.getItem("publicities"));if(a!=null){clearInterval(b);f.searchPublicityZone(a,f.zoneName);var g=0;f.zones.map(function(h){f.position[h.zoneName]=g;g++;f.loadPublicityZone(h.zoneName);f.refreshLinesTitle()}.bind(f));f.$parent.finishSpinner()}},100)},props:{tittleSubLink:{type:String},textCondition1:{type:String},textCondition2:{type:String},textCondition3:{type:String},enableDefenseInfo:{type:Boolean},zones:{type:Array,"default":function(){return[{zoneName:"Zone10",title:this.tittleSubLink},{zoneName:"Zone16",title:"Defensor del Consumidor Financiero"}]}},bankId:{type:String}},data:function(){return{showModal:false,zoneName:"Zone10",template:"null",showDefenseModal:false,defenseContent:"",defenseTitle:'Defensor del Consumidor Financiero <i id="defenseConsumerIcon" style="margin-left:4px; color: #626A71; cursor: pointer;" class="fas fa-angle-down icon-right"></i>',zone8Title:"",publicityContent:[],publicityContentHtml:"",showPublicityModal:false,zoneShowed:"",position:{},}},watch:{showModal:function(a){if(!a){this.showDefenseModal=false}},tittleSubLink:function(a){this.refreshLinesTitle()}},methods:{searchPublicityZone:function(b,d){if(b!=null){for(var c=0;c<b.length;c++){if(b[c].zoneName==d){if(b[c].currentContentName!=""&&b[c].code!=""){var a="/icbs-web/Ajax?AID=CAMPAIGN_TEMPLATE&RQE=FAC0019C79B6358A&CRFT=fac0019c79b6348e";$.ajax({url:a,type:"GET",cache:true,async:true,data:{TemplateName:b[c].currentContentName,CampaignCode:b[c].code}}).done(function(e){$("#publicity").empty();$("#publicity").append(e);document.removeEventListener("click",outElement);document.addEventListener("click",outElement);$("#buttonSubLinkIcon,#buttonSubLink").off("click").on("click",function(){$("#publicity").toggle();if($("#publicity").is(":visible")){vm.showMainCompatibility=false;vm.$refs.dropinfo.showModal=true}else{vm.showMainCompatibility=true;vm.$refs.dropinfo.showModal=false}})}).fail(function(e){})}break}}}},addContent:function(){var a=setInterval(function(){if($("#modalConditionSecurity___BV_modal_body_").length!=0){$("#modalConditionSecurity___BV_modal_body_").append(vm.$refs.dropinfo.template);clearInterval(a)}},10)},searchDefenseContent:function(){if(this.defenseContent!=""){this.showDefenseModal=!this.showDefenseModal;setTimeout(function(){vm.showMainCompatibility=!this.showDefenseModal}.bind(this),50)}},loadPublicityContent:function(a){if(this.zoneShowed==a){this.zoneShowed="";this.showPublicityModal=false}else{this.zoneShowed=a;var b=this.publicityContent.filter(function(c){return c.zone==a});if(Array.isArray(b)&&b.length>=1){this.publicityContentHtml=b[0].content;this.showPublicityModal=true;setTimeout(function(){vm.showMainCompatibility=false}.bind(this),50)}}},getZoneHtml:function(a){return a.title+' <i id="'+a.zoneName+'Icon" style="margin-left:4px;color: #626A71; cursor: pointer;" class="fas fa-angle-down icon-right publicity-angle-icon"></i>'},getAllPublicity:function(){var a="/icbs-web/Ajax?AID=CAMPAIGN_GET_PUBLICITIES_LOGIN&RQE=FAC0019C79B6358B&CRFT=fac0019c79b6348e";$.ajax({url:a,type:"GET",cache:true}).done(function(b){publicities=b;if(Array.isArray(publicities)){window.sessionStorage.setItem("publicities",JSON.stringify(publicities))}}).fail(function(){})},loadPublicityZone:function(b){var c=JSON.parse(sessionStorage.getItem("publicities"));if(c!=null){for(var d=0;d<c.length;d++){if(c[d].zoneName==b){if(Array.isArray(c)&&c.length>=1&&c[d].currentContentName!=""&&c[d].code!=""){var a="/icbs-web/Ajax?AID=CAMPAIGN_TEMPLATE&RQE=FAC0019C79B6358C&CRFT=fac0019c79b6348e";$.ajax({url:a,type:"GET",cache:true,async:true,data:{TemplateName:c[d].currentContentName,CampaignCode:c[d].code}}).done(function(e){if(b=="Zone16"){this.defenseContent=e}this.publicityContent.push({zone:b,content:e})}.bind(this))}else{console.log('No se ha podido obtener una publicidad para la zona: "'+b+'"');return}}}}},refreshLinesTitle:function(){var a=this.zones.filter(function(b){return b.zoneName!="Zone10"});a.unshift({zoneName:"Zone10",title:this.bankId=="BBTA"?"L&iacute;neas de Servicio al Cliente":"L&iacute;neas de servicio al cliente Banca Empresarial"});this.zones=a}}});