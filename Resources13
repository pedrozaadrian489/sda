(function(a){a.widget("ui.tokenvalidator",{version:"1.0",mask:a("<div />").html("&#8226;").text(),options:{input:"#ssecurID",lookInput:false,onlyNumber:{nchars:".-"}},_init:function(){var b=this;var c=b.options;this.options.tval1="";this.options.tval2="";a(c.input).prop("enabled",true);$cle=a('<i class="clearable__clear"></i>');a(c.input).on("keydown",function(d){var f=(undefined===d.key)?b.keyNumericTransform(d.keyCode):d.key;var e=new RegExp(/[0-9]/g);if((f!="Tab"&&!e.test(f))||d.shiftKey||d.altKey){d.preventDefault()}});a(c.input).on("keypress",function(f){var g=b.keyNumericTransform(f.which);if(isNumeric(g)&&a(c.input).val().length<=5&&b.getToken(1).length<=5){b.putToken(1,g);var d=a(c.input).val()+b.mask;a(c.input).val(d);$cle.show();b.isPost(a(c.input))}f.preventDefault()});a(c.input).on("paste",function(j){if(!a(c.input).is("readonly")&&sessionStorage.getItem("ActivePaste")=="true"){b.clearToken();var g="";var d=(ua=window.navigator.userAgent.indexOf("MSIE ")>=0);var i=navigator.userAgent.indexOf("Trident/7.0");if(d||i>-1){g=window.clipboardData.getData("text")}else{g=j.originalEvent.clipboardData.getData("Text")}g=g.replace(/\D/g,"");g=g.substring(0,(g.length<=6)?g.length:a(c.input).attr("maxlength"));var h=Array((g).length+1).join(b.mask);try{if(d||i>-1){window.clipboardData.setData("text",h)}else{j.originalEvent.clipboardData.setData("Text",h)}}catch(f){a(c.input).attr("type","password")}b.putToken(1,g);a(c.input).val(h);if(b.getToken(1).length>0){$cle.show()}b.isPost(a(c.input))}j.preventDefault()});$cle.insertAfter(c.input);a(c.input).on("change",function(d){if(a(c.input).val().length<1){b.clearToken();$cle.hide(false)}});a(c.input).on("input",function(){if(this.value){$cle.show()}else{$cle.hide()}});$cle.on("click",function(d){d.preventDefault();a(c.input).val("").trigger("input");b.clearToken()})},getToken:function(b){return this.options["tval"+b]},clearToken:function(){this.options.tval1="";this.options.tval2=""},putToken:function(d,b){var c=this.options["tval"+d];if(c.length<=6){c+=b;this.options["tval"+d]=c}},isPost:function(c){var b=this;if(c.val().length==6&&b.getToken(1).length==6&&a("#disableImageButton").is(":checked")){a("#btnDet").prop("disabled",false).trigger("click")}},keyNumericTransform:function(b){var c={9:"Tab",48:0,49:1,50:2,51:3,52:4,53:5,54:6,55:7,56:8,57:9,96:0,97:1,98:2,99:3,100:4,101:5,102:6,103:7,104:8,105:9};return(typeof c[b]!="undefined")?c[b]:""}});a.extend(a.ui.tokenvalidator,{})})(jQuery);